{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\truon\\\\OneDrive\\\\Desktop\\\\School\\\\Semester 8\\\\CS 160\\\\Project\\\\UBYelp\\\\UBYelp\\\\Ubyelp\\\\src\\\\components\\\\SearchBar\\\\SearchBar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './SearchBar.css';\nimport { useLocation } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchBar() {\n  _s();\n\n  const {\n    state\n  } = useLocation();\n  const {\n    account_id\n  } = state;\n  const navigate = useNavigate();\n  var thisState = {\n    id: account_id,\n    term: '',\n    location: '',\n    sortBy: 'best_match',\n    price: 2,\n    open_now: true,\n    radius: 30000\n  };\n  const sortByOptions = {\n    'Best Match': 'best_match',\n    'Distance': 'distance',\n    'Highest Rated': 'rating',\n    'Most Reviewed': 'review_count'\n  };\n  const filterByPrices = {\n    '$': 1,\n    '$$': 2,\n    '$$$': 3,\n    '$$$$': 4\n  };\n  const filterByOpenNows = {\n    'Open Now': 1,\n    'Hours don\\'t matter': 0 //Needs a better name\n\n  }; //Initialize state\n\n  const [id, unused] = useState(account_id);\n  const [term, setTerm] = useState('');\n  const [location, setLocation] = useState('');\n  const [sortBy, setSortBy] = useState('best_match');\n  const [radius, setRadius] = useState(30000);\n  const [rating, setRating] = useState('-1');\n  const [price, setPrice] = useState('');\n  const [open_now, setOpenNow] = useState(1);\n  const [in_list, setInList] = useState('');\n  const [not_list, setNotList] = useState('');\n  const [priceToggle, setPriceToggle] = useState([false, false, false, false]); //Not a filter\n\n  const [listNames, setListNames] = useState({});\n  const [initialized, setInitialized] = useState(false);\n\n  function initialize() {\n    if (!initialized) {\n      //Get Default Filters\n      fetch('http://localhost:3001/defaultfilters', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: JSON.stringify({\n          'id': id\n        })\n      }).then(response => response.json()).then(filters => {\n        setLocation(filters.address);\n        setRadius(filters.distance);\n        setRating(filters.rating);\n        setPrice(filters.price);\n        setOpenNow(filters.open);\n        setInList(filters.in_list);\n        setNotList(filters.not_list);\n        if (filters.address !== '') document.getElementById(\"location\").value = location;\n        if (filters.distance !== -1) document.getElementById(\"radius\").value = radius;\n        if (filters.rating !== -1) document.getElementById(\"rating\").value = rating;\n        if (filters.in_list !== '') document.getElementById(\"inList\").value = in_list;\n        if (filters.not_list !== '') document.getElementById(\"notList\").value = not_list; //Get List Names\n\n        fetch('http://localhost:3001/listnames', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: JSON.stringify({\n            'id': id\n          })\n        }).then(response => response.json()).then(names => {\n          //Format: {'list_name': 'list_id', ...}\n          setListNames(names);\n          setInitialized(true);\n        });\n      });\n    }\n  } // Determines which sort method to highlight\n\n\n  function getSortByClass(sortByOption) {\n    if (sortBy === sortByOption) {\n      return 'active';\n    }\n\n    return '';\n  }\n\n  function getFilterByPriceClass(filterByPrice) {\n    if (priceToggle[filterByPrice - 1] === filterByPrice) {\n      return 'active';\n    }\n\n    return '';\n  }\n\n  function getFilterByOpenNowClass(filterByOpenNow) {\n    if (open_now === filterByOpenNow) {\n      return 'active';\n    }\n\n    return '';\n  } // Determines which sort method to use\n\n\n  function handleSortByChange(sortByOption) {\n    setSortBy(sortByOption);\n  } // Determines which price range we choose\n\n\n  function handleFilterByPriceChange(filterByPrice) {\n    priceToggle[filterByPrice - 1] = !priceToggle[filterByPrice - 1];\n    let p = '';\n    if (priceToggle[0]) p += '1,';\n    if (priceToggle[1]) p += '2,';\n    if (priceToggle[2]) p += '3,';\n    if (priceToggle[3]) p += '4,';\n    if (p !== '') p = p.substring(0, p.length - 1);\n    setPrice(p);\n  } // Determines open or closed\n\n\n  function handleFilterByOpenNowChange(filterByOpenNow) {\n    setOpenNow(filterByOpenNow);\n  } // Updates food/product input given by user\n\n\n  function handleTermChange(event) {\n    setTerm(event.target.value);\n  } // Updates location input given by user\n\n\n  function handleLocationChange(event) {\n    setLocation(event.target.value);\n  } // Updates radius input given by user\n\n\n  function handleRadiusChange(event) {\n    let value = event.target.value;\n\n    if (value > 40000) {\n      document.getElementById(\"radius\").value = 40000;\n      value = 40000;\n    } else if (value < 1) {\n      document.getElementById(\"radius\").value = 1;\n      value = 1;\n    }\n\n    setRadius(value);\n  }\n\n  function handleRatingChange(event) {\n    let value = event.target.value;\n\n    if (value > 5) {\n      document.getElementById(\"rating\").value = 5;\n      value = 5;\n    } else if (value <= 0) {\n      document.getElementById(\"rating\").value = 0.1;\n      value = 0.1;\n    }\n\n    setRating(event.target.value);\n  }\n\n  function handleInListChange(event) {\n    setInList(event.target.value);\n  }\n\n  function handleNotListChange(event) {\n    setNotList(event.target.value);\n  } // Queries Yelp for food/product\n\n\n  function handleSearch(event) {\n    //this.props.searchYelp(state.term, state.location, state.sortBy, state.price, state.open_now, state.radius);\n    console.log(price);\n    /*\r\n    fetch('http://localhost:3001/search', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n    body: JSON.stringify({\r\n    //Temporary variables used \r\n    //Alternative option: JSON.stringify(this.filters)\r\n    id: id,\r\n    keywords: term,\r\n    location: location,\r\n    sort_by: sortBy,\r\n    radius: radius,\r\n    rating: rating,\r\n    price: price,\r\n    open: open_now,\r\n    in_list: in_list,\r\n    not_list: not_list\r\n    })\r\n    }).then((response) => response.json()\r\n    ).then((result) => {\r\n    //Send to account_id and results BusinessList\r\n    navigate('/results', { 'state': { 'account_id': thisState.id, 'searchResults': result } });\r\n    });*/\n\n    event.preventDefault();\n  } // Highlights the selected sort-by method\n\n\n  function renderSortByOptions() {\n    return Object.keys(sortByOptions).map(sortByOption => {\n      let sortByOptionValue = sortByOptions[sortByOption];\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: getSortByClass(sortByOptionValue),\n        onClick: () => handleSortByChange(sortByOptionValue),\n        children: sortByOption\n      }, sortByOptionValue, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }, this);\n    });\n  } // Highlights the selected price range\n\n\n  function renderFilterByPrice() {\n    return Object.keys(filterByPrices).map(filterByPrice => {\n      let filterByPriceValue = filterByPrices[filterByPrice];\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: getFilterByPriceClass(filterByPriceValue),\n        onClick: () => handleFilterByPriceChange(filterByPriceValue),\n        children: filterByPrice\n      }, filterByPriceValue, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }, this);\n    });\n  } // Highlights open or closed\n\n\n  function renderFilterByOpenNow() {\n    return Object.keys(filterByOpenNows).map(filterByOpenNow => {\n      let filterByOpenNowValue = filterByOpenNows[filterByOpenNow];\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: getFilterByOpenNowClass(filterByOpenNowValue),\n        onClick: () => handleFilterByOpenNowChange(filterByOpenNowValue),\n        children: filterByOpenNow\n      }, filterByOpenNowValue, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }, this);\n    });\n  }\n\n  function renderOptions() {\n    return Object.keys(listNames).map(name => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this);\n    });\n  } // Renders two input boxes. One for business and the other for location. \n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"SearchBar\",\n    children: [initialize(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SearchBar-sort-options\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: renderSortByOptions()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SearchBar-filter-prices\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: renderFilterByPrice()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SearchBar-filter-openNow\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: renderFilterByOpenNow()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SearchBar-fields\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Enter Keyword. e.g. burgers\",\n        onChange: handleTermChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"location\",\n        placeholder: \"Enter Location. e.g. San Jose\",\n        onChange: handleLocationChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"radius\",\n        type: \"number\",\n        min: \"1\",\n        max: \"40000\",\n        placeholder: \"Enter Radius in Meters. e.g. 30000\",\n        onChange: handleRadiusChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"rating\",\n        type: \"number\",\n        min: \"0\",\n        max: \"5\",\n        step: \"0.1\",\n        placeholder: \"Minimum rating. e.g. 3.5\",\n        onChange: handleRatingChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SearchBar-selects\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"inList\",\n        onChange: handleInListChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select list...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 21\n        }, this), renderOptions()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"notList\",\n        onChange: handleNotListChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select list...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }, this), renderOptions()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SearchBar-submit\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: handleSearch,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SearchBar, \"rH9HL+58aSogWE1oOCdFC/sYJXE=\", false, function () {\n  return [useLocation, useNavigate];\n});\n\n_c = SearchBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"sources":["C:/Users/truon/OneDrive/Desktop/School/Semester 8/CS 160/Project/UBYelp/UBYelp/Ubyelp/src/components/SearchBar/SearchBar.js"],"names":["React","useState","useLocation","useNavigate","SearchBar","state","account_id","navigate","thisState","id","term","location","sortBy","price","open_now","radius","sortByOptions","filterByPrices","filterByOpenNows","unused","setTerm","setLocation","setSortBy","setRadius","rating","setRating","setPrice","setOpenNow","in_list","setInList","not_list","setNotList","priceToggle","setPriceToggle","listNames","setListNames","initialized","setInitialized","initialize","fetch","method","headers","body","JSON","stringify","then","response","json","filters","address","distance","open","document","getElementById","value","names","getSortByClass","sortByOption","getFilterByPriceClass","filterByPrice","getFilterByOpenNowClass","filterByOpenNow","handleSortByChange","handleFilterByPriceChange","p","substring","length","handleFilterByOpenNowChange","handleTermChange","event","target","handleLocationChange","handleRadiusChange","handleRatingChange","handleInListChange","handleNotListChange","handleSearch","console","log","preventDefault","renderSortByOptions","Object","keys","map","sortByOptionValue","renderFilterByPrice","filterByPriceValue","renderFilterByOpenNow","filterByOpenNowValue","renderOptions","name"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport './SearchBar.css';\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nexport default function SearchBar() {\r\n    const { state } = useLocation();\r\n    const { account_id } = state;\r\n    const navigate = useNavigate();\r\n\r\n    var thisState = {\r\n        id: account_id,\r\n        term:'',\r\n        location:'',\r\n        sortBy:'best_match',\r\n        price: 2,\r\n        open_now: true,\r\n        radius: 30000 \r\n    };\r\n\r\n    const sortByOptions = {\r\n        'Best Match': 'best_match',\r\n        'Distance': 'distance',\r\n        'Highest Rated': 'rating',\r\n        'Most Reviewed': 'review_count'\r\n    };\r\n\r\n    const filterByPrices = {\r\n        '$': 1,\r\n        '$$': 2,\r\n        '$$$': 3,\r\n        '$$$$': 4\r\n    };\r\n\r\n    const filterByOpenNows = {\r\n        'Open Now': 1,\r\n        'Hours don\\'t matter': 0    //Needs a better name\r\n    };\r\n\r\n\r\n    //Initialize state\r\n    const [id, unused] = useState(account_id);\r\n    const [term, setTerm] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const [sortBy, setSortBy] = useState('best_match');\r\n    const [radius, setRadius] = useState(30000);\r\n    const [rating, setRating] = useState('-1');\r\n    const [price, setPrice] = useState('');\r\n    const [open_now, setOpenNow] = useState(1);\r\n    const [in_list, setInList] = useState('');\r\n    const [not_list, setNotList] = useState('');\r\n\r\n    const [priceToggle, setPriceToggle] = useState([false, false, false, false]);   //Not a filter\r\n    const [listNames, setListNames] = useState({});\r\n    const [initialized, setInitialized] = useState(false);\r\n\r\n    function initialize() {\r\n        if (!initialized) {\r\n            //Get Default Filters\r\n            fetch('http://localhost:3001/defaultfilters', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                body: JSON.stringify({\r\n                    'id': id\r\n                })\r\n            }).then((response) => response.json()\r\n            ).then((filters) => {\r\n\r\n                setLocation(filters.address);\r\n                setRadius(filters.distance);\r\n                setRating(filters.rating);\r\n                setPrice(filters.price);\r\n                setOpenNow(filters.open);\r\n                setInList(filters.in_list);\r\n                setNotList(filters.not_list);\r\n\r\n                if (filters.address !== '') document.getElementById(\"location\").value = location;\r\n                if (filters.distance !== -1) document.getElementById(\"radius\").value = radius;\r\n                if (filters.rating !== -1) document.getElementById(\"rating\").value = rating;\r\n                if (filters.in_list !== '') document.getElementById(\"inList\").value = in_list\r\n                if (filters.not_list !== '') document.getElementById(\"notList\").value = not_list\r\n\r\n                //Get List Names\r\n                fetch('http://localhost:3001/listnames', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                    body: JSON.stringify({\r\n                        'id': id\r\n                    })\r\n                }).then((response) => response.json()\r\n                ).then((names) => {\r\n                    //Format: {'list_name': 'list_id', ...}\r\n                    setListNames(names);\r\n                    setInitialized(true);\r\n                });\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    // Determines which sort method to highlight\r\n    function getSortByClass(sortByOption) {\r\n        if(sortBy === sortByOption) {\r\n            return 'active';\r\n        }\r\n        return '';\r\n    }\r\n\r\n\r\n\r\n    function getFilterByPriceClass(filterByPrice) {\r\n        if (priceToggle[filterByPrice-1] === filterByPrice) {\r\n            return 'active';\r\n        }\r\n        return '';\r\n\r\n    }\r\n\r\n\r\n\r\n    function getFilterByOpenNowClass(filterByOpenNow){\r\n        if (open_now === filterByOpenNow) {\r\n            return 'active';\r\n        }\r\n        return '';\r\n\r\n    }\r\n\r\n    // Determines which sort method to use\r\n    function handleSortByChange(sortByOption) {\r\n        setSortBy(sortByOption);\r\n    }\r\n\r\n\r\n     // Determines which price range we choose\r\n    function handleFilterByPriceChange(filterByPrice) {\r\n        priceToggle[filterByPrice - 1] = !priceToggle[filterByPrice - 1];\r\n\r\n        let p = '';\r\n        if (priceToggle[0]) p += '1,';\r\n        if (priceToggle[1]) p += '2,';\r\n        if (priceToggle[2]) p += '3,';\r\n        if (priceToggle[3]) p += '4,';\r\n        if (p !== '') p=p.substring(0, p.length - 1);\r\n\r\n        setPrice(p);\r\n    }\r\n\r\n    // Determines open or closed\r\n    function handleFilterByOpenNowChange(filterByOpenNow) {\r\n        setOpenNow(filterByOpenNow);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    // Updates food/product input given by user\r\n    function handleTermChange(event) {\r\n        setTerm(event.target.value);\r\n    }\r\n\r\n    // Updates location input given by user\r\n    function handleLocationChange(event) {\r\n        setLocation(event.target.value);\r\n    }\r\n\r\n     // Updates radius input given by user\r\n    function handleRadiusChange(event) {\r\n        let value = event.target.value;\r\n        if (value > 40000) {\r\n            document.getElementById(\"radius\").value = 40000;\r\n            value = 40000;\r\n        } else if (value < 1) {\r\n            document.getElementById(\"radius\").value = 1;\r\n            value = 1;\r\n        }\r\n        setRadius(value);\r\n    }\r\n\r\n    function handleRatingChange(event) {\r\n        let value = event.target.value;\r\n        if (value > 5) {\r\n            document.getElementById(\"rating\").value = 5;\r\n            value = 5;\r\n        } else if (value <= 0) {\r\n            document.getElementById(\"rating\").value = 0.1;\r\n            value = 0.1;\r\n        }\r\n        setRating(event.target.value);\r\n    }\r\n\r\n    function handleInListChange(event){\r\n        setInList(event.target.value);\r\n    }\r\n\r\n    function handleNotListChange(event) {\r\n        setNotList(event.target.value);\r\n    }\r\n\r\n    // Queries Yelp for food/product\r\n    function handleSearch(event) {\r\n        //this.props.searchYelp(state.term, state.location, state.sortBy, state.price, state.open_now, state.radius);\r\n        console.log(price);/*\r\n        fetch('http://localhost:3001/search', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n            body: JSON.stringify({\r\n                //Temporary variables used \r\n                //Alternative option: JSON.stringify(this.filters)\r\n                id: id,\r\n                keywords: term,\r\n                location: location,\r\n                sort_by: sortBy,\r\n                radius: radius,\r\n                rating: rating,\r\n                price: price,\r\n                open: open_now,\r\n                in_list: in_list,\r\n                not_list: not_list\r\n            })\r\n        }).then((response) => response.json()\r\n        ).then((result) => {\r\n            //Send to account_id and results BusinessList\r\n            navigate('/results', { 'state': { 'account_id': thisState.id, 'searchResults': result } });\r\n        });*/\r\n        event.preventDefault();\r\n    }\r\n\r\n    // Highlights the selected sort-by method\r\n    function renderSortByOptions() {\r\n        return Object.keys(sortByOptions).map(sortByOption => {\r\n            let sortByOptionValue = sortByOptions[sortByOption];\r\n            return (\r\n                    <li className={getSortByClass(sortByOptionValue)}\r\n                        key={sortByOptionValue}\r\n                        onClick={() => handleSortByChange(sortByOptionValue) }>\r\n                    {sortByOption}\r\n                    </li>\r\n                    );  \r\n        });\r\n    }\r\n\r\n\r\n    // Highlights the selected price range\r\n    function renderFilterByPrice() {\r\n        return Object.keys(filterByPrices).map(filterByPrice => {\r\n            let filterByPriceValue = filterByPrices[filterByPrice];\r\n            return (\r\n                    <li className={getFilterByPriceClass(filterByPriceValue)}\r\n                        key={filterByPriceValue}\r\n                        onClick={()=>handleFilterByPriceChange(filterByPriceValue)}>\r\n                    {filterByPrice}\r\n                    </li>\r\n                    );  \r\n        });\r\n    }\r\n\r\n\r\n\r\n    // Highlights open or closed\r\n    function renderFilterByOpenNow() {\r\n        return Object.keys(filterByOpenNows).map(filterByOpenNow => {\r\n            let filterByOpenNowValue = filterByOpenNows[filterByOpenNow];\r\n            return (\r\n                    <li className={getFilterByOpenNowClass(filterByOpenNowValue)}\r\n                        key={filterByOpenNowValue}\r\n                        onClick={()=>handleFilterByOpenNowChange(filterByOpenNowValue)}>\r\n                    {filterByOpenNow}\r\n                    </li>\r\n                    );  \r\n        });\r\n    }\r\n\r\n    function renderOptions() {\r\n        return Object.keys(listNames).map(name => {\r\n            return (\r\n                <option>{name}</option>\r\n            );\r\n        });\r\n    }\r\n\r\n    // Renders two input boxes. One for business and the other for location. \r\n    return (\r\n        <div className=\"SearchBar\">\r\n\r\n            {initialize()}\r\n            <div className=\"SearchBar-sort-options\">\r\n                <ul>\r\n                    {renderSortByOptions()} \r\n                </ul>\r\n            </div>\r\n\r\n            <div className=\"SearchBar-filter-prices\">\r\n                <ul>\r\n                    {renderFilterByPrice()}\r\n                </ul>\r\n            </div>\r\n\r\n\r\n\r\n            <div className=\"SearchBar-filter-openNow\">          \r\n                <ul>\r\n                    {renderFilterByOpenNow()} \r\n                </ul>\r\n            </div>\r\n\r\n\r\n\r\n            <div className=\"SearchBar-fields\">\r\n                    \r\n                <input placeholder=\"Enter Keyword. e.g. burgers\" onChange={handleTermChange} />\r\n                <input id=\"location\" placeholder=\"Enter Location. e.g. San Jose\" onChange={handleLocationChange} />\r\n                <input id=\"radius\" type=\"number\" min=\"1\" max=\"40000\" placeholder=\"Enter Radius in Meters. e.g. 30000\" onChange={handleRadiusChange} />\r\n                <input id=\"rating\" type=\"number\" min=\"0\" max=\"5\" step=\"0.1\" placeholder=\"Minimum rating. e.g. 3.5\" onChange={handleRatingChange} />\r\n\r\n            </div>\r\n\r\n            <div className=\"SearchBar-selects\">\r\n                <select id=\"inList\" onChange={handleInListChange}>\r\n                    <option value=\"\">Select list...</option>\r\n                    {renderOptions()}\r\n                </select>\r\n                <select id=\"notList\" onChange={handleNotListChange}>\r\n                    <option value=\"\">Select list...</option>\r\n                    {renderOptions()}\r\n                </select>\r\n            </div>\r\n\r\n                <div className=\"SearchBar-submit\">\r\n                <a onClick={handleSearch}>Search</a>\r\n            </div>\r\n        </div>    \r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}