{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\truon\\\\OneDrive\\\\Desktop\\\\School\\\\Semester 8\\\\CS 160\\\\Project\\\\UBYelp\\\\UBYelp\\\\Ubyelp\\\\src\\\\components\\\\Business\\\\Business.js\";\nimport React from 'react';\nimport './Business.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Business extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listNames: {},\n      key: this.props.key\n    }; //Set in_list and not_list's dropdown menu values to 'names'\n\n    fetch('http://localhost:3001/listnames', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: JSON.stringify({\n        'id': this.props.business.account_id\n      })\n    }).then(response => response.json()).then(names => {\n      //Format: {'list_name': 'list_id', ...}\n      this.setState({\n        listNames: names\n      });\n    });\n    this.addToList = this.addToList.bind(this); //this.openAddToListModal = this.openAddToListModal.bind(this);\n  }\n\n  openModal(business) {\n    document.getElementById(\"modal\" + business.id).style.display = 'block';\n    document.getElementById(\"modelHeader\" + business.id).innerHTML = 'Adding ' + business.name + ' on ' + business.location.address1 + ' to list'; //<i>' + listMenu.options[listMenu.selectedIndex].text + '</i>';\n    //document.getElementById(\"successMessage\" + business.id).innerHTML = business.name + ' on ' + business.location.address1 + ' added to ' + listMenu.options[listMenu.selectedIndex].text + '!'\n  }\n\n  closeModal(key) {\n    document.getElementById(\"modal\" + key).style.display = 'none';\n  }\n\n  closeSuccessModal(key) {\n    document.getElementById(\"successModal\" + key).style.display = 'none';\n  }\n\n  renderModalOptions() {\n    return Object.keys(this.state.listNames).map(name => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        value: this.state.listNames[name],\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this);\n    });\n  }\n\n  addToList(business) {\n    let listMenu = document.getElementById('listMenu' + business.id);\n\n    if (listMenu.value !== '') {\n      fetch('http://localhost:3001/addlistitem', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: JSON.stringify({\n          'account_id': business.account_id,\n          'list_id': listMenu.value,\n          'link': encodeURIComponent(business.url),\n          'name': business.name,\n          'desc': document.getElementById(\"desc\" + business.id).value,\n          'rating': document.querySelector('input[name=\"rating\"]:checked').value\n        })\n      }).then(async response => {\n        let message = await response.text(); //Clear modal inputs\n\n        this.closeModal(this.props.business.id);\n        document.getElementById(\"successModal\" + this.props.business.id).style.display = 'block';\n\n        if (message === '') {\n          //Open success modal\n          document.getElementById(\"modalMessage\" + this.props.business.id).innerHTML = 'Added ' + business.name + ' on ' + business.location.address1 + ' to ' + listMenu.options[listMenu.selectedIndex].text + '!';\n        } else {\n          //Open modal with error message\n          document.getElementById(\"modalMessage\" + this.props.business.id).innerHTML = 'Error: ' + message;\n        }\n      });\n    }\n  } // Renders the individual businesses returned in the search results\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Business\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-container\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: this.props.business.url,\n          target: \"_blank\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: this.props.business.image_url,\n            alt: \"\",\n            width: \"280\",\n            height: \"280\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: this.props.business.url,\n        target: \"_blank\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: this.props.business.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Business-information\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Business-address\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.props.business.location.address1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.props.business.location.city\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: `${this.props.business.location.state} ${this.props.business.location.zip_code}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Business-reviews\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: this.props.business.categories[0].title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"rating\",\n            children: `${this.props.business.rating} stars`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: `${this.props.business.review_count} reviews`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.openModal(this.props.business),\n        children: \"Add to list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"modal\" + this.props.business.id,\n        className: \"modal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"close\",\n            onClick: () => this.closeModal(this.props.business.id),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            id: \"modelHeader\" + this.props.business.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"listMenu\" + this.props.business.id,\n            children: [this.renderModalOptions(), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select list...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"hidden\",\n            id: \"listId\" + this.props.business.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"desc\" + this.props.business.id,\n            cols: \"60\",\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Rating for list\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"rating\",\n              value: \"5\",\n              id: \"5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"5\",\n              children: \"\\u2606\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 81\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"rating\",\n              value: \"4\",\n              id: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"4\",\n              children: \"\\u2606\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 81\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"rating\",\n              value: \"3\",\n              id: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"3\",\n              children: \"\\u2606\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 81\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"rating\",\n              value: \"2\",\n              id: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"2\",\n              children: \"\\u2606\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 81\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"rating\",\n              value: \"1\",\n              id: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"1\",\n              children: \"\\u2606\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 82\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"submit\" + this.props.business.id,\n            onClick: () => this.addToList(this.props.business),\n            children: \"Add!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"successModal\" + this.props.business.id,\n        className: \"modal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"close\",\n            onClick: () => this.closeSuccessModal(this.props.business.id),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            id: \"modalMessage\" + this.props.business.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Business;","map":{"version":3,"sources":["C:/Users/truon/OneDrive/Desktop/School/Semester 8/CS 160/Project/UBYelp/UBYelp/Ubyelp/src/components/Business/Business.js"],"names":["React","Business","Component","constructor","props","state","listNames","key","fetch","method","headers","body","JSON","stringify","business","account_id","then","response","json","names","setState","addToList","bind","openModal","document","getElementById","id","style","display","innerHTML","name","location","address1","closeModal","closeSuccessModal","renderModalOptions","Object","keys","map","listMenu","value","encodeURIComponent","url","querySelector","message","text","options","selectedIndex","render","image_url","city","zip_code","categories","title","rating","review_count"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './Business.css';\r\n\r\nclass Business extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            listNames: {},\r\n            key: this.props.key\r\n        }\r\n        //Set in_list and not_list's dropdown menu values to 'names'\r\n        fetch('http://localhost:3001/listnames', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n            body: JSON.stringify({\r\n                'id': this.props.business.account_id\r\n            })\r\n        }).then((response) => response.json()\r\n        ).then((names) => {\r\n            //Format: {'list_name': 'list_id', ...}\r\n            this.setState({ listNames: names });\r\n        });\r\n        this.addToList = this.addToList.bind(this);\r\n        //this.openAddToListModal = this.openAddToListModal.bind(this);\r\n    }\r\n    \r\n\r\n\r\n    openModal(business) {\r\n        document.getElementById(\"modal\" + business.id).style.display = 'block';\r\n        document.getElementById(\"modelHeader\" + business.id).innerHTML = 'Adding ' + business.name + ' on ' + business.location.address1 + ' to list';//<i>' + listMenu.options[listMenu.selectedIndex].text + '</i>';\r\n        //document.getElementById(\"successMessage\" + business.id).innerHTML = business.name + ' on ' + business.location.address1 + ' added to ' + listMenu.options[listMenu.selectedIndex].text + '!'\r\n    }\r\n\r\n    closeModal(key) {\r\n        document.getElementById(\"modal\"+key).style.display = 'none';\r\n    }\r\n\r\n    closeSuccessModal(key) {\r\n        document.getElementById(\"successModal\" + key).style.display = 'none';\r\n    }\r\n\r\n    renderModalOptions() {\r\n        return Object.keys(this.state.listNames).map(name => {\r\n            return (\r\n                <option value={this.state.listNames[name]}>{name}</option>\r\n            );\r\n        });\r\n    }\r\n\r\n    addToList(business) {\r\n        let listMenu = document.getElementById('listMenu' + business.id);\r\n        if (listMenu.value !== '') {\r\n            fetch('http://localhost:3001/addlistitem', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n                body: JSON.stringify({\r\n                    'account_id': business.account_id,\r\n                    'list_id': listMenu.value,\r\n                    'link': encodeURIComponent(business.url),\r\n                    'name': business.name,\r\n                    'desc': document.getElementById(\"desc\" + business.id).value,\r\n                    'rating': document.querySelector('input[name=\"rating\"]:checked').value\r\n                })\r\n            }).then(async (response) => {\r\n                let message = await response.text();\r\n                //Clear modal inputs\r\n                this.closeModal(this.props.business.id);\r\n\r\n                document.getElementById(\"successModal\" + this.props.business.id).style.display = 'block';\r\n                if (message === '') {\r\n                    //Open success modal\r\n                    document.getElementById(\"modalMessage\" + this.props.business.id).innerHTML = 'Added ' + business.name + ' on ' + business.location.address1 + ' to ' + listMenu.options[listMenu.selectedIndex].text + '!';\r\n                } else {\r\n                    //Open modal with error message\r\n                    document.getElementById(\"modalMessage\" + this.props.business.id).innerHTML = 'Error: '+message;\r\n                }\r\n                \r\n            });\r\n        }\r\n    }\r\n\r\n    // Renders the individual businesses returned in the search results\r\n    render() {\r\n        return (\r\n            <div className=\"Business\">\r\n                <div className=\"image-container\">\r\n                    <a href={this.props.business.url} target=\"_blank\">\r\n                        <img src={this.props.business.image_url} alt='' width=\"280\" height=\"280\" />\r\n                    </a>\r\n                </div>\r\n                <a href={this.props.business.url} target=\"_blank\">\r\n                    <h2>{this.props.business.name}</h2>\r\n                </a>\r\n                <div className=\"Business-information\">\r\n                    <div className=\"Business-address\">\r\n                        <p>{this.props.business.location.address1}</p>\r\n                        <p>{this.props.business.location.city}</p>\r\n                        <p>{`${this.props.business.location.state} ${this.props.business.location.zip_code}`}</p>\r\n                    </div>\r\n                    <div className=\"Business-reviews\">\r\n                        <h3>{this.props.business.categories[0].title}</h3>\r\n                        <h3 className=\"rating\">{`${this.props.business.rating} stars`}</h3>\r\n                        <p>{`${this.props.business.review_count} reviews`}</p>\r\n                    </div>\r\n                </div>\r\n                <button onClick={() => this.openModal(this.props.business)}>Add to list</button>\r\n\r\n                <div id={\"modal\"+this.props.business.id} className=\"modal\">\r\n                    <div className=\"modal-content\">\r\n                        <span className=\"close\" onClick={() =>this.closeModal(this.props.business.id)}>&times;</span>\r\n                        <h2 id={\"modelHeader\" + this.props.business.id}></h2>\r\n                        <select id={\"listMenu\" + this.props.business.id}>\r\n                            {this.renderModalOptions()}\r\n                            <option value=\"\">Select list...</option>\r\n                        </select>\r\n                        <input type=\"hidden\" id={\"listId\" + this.props.business.id} />\r\n                        <h3>Description</h3>\r\n                        <textarea id={\"desc\" + this.props.business.id} cols=\"60\" rows=\"3\" />\r\n                        <h3>Rating for list</h3>\r\n                        <div className=\"rating\">\r\n                            <input type=\"radio\" name=\"rating\" value=\"5\" id=\"5\"/><label for=\"5\">☆</label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"4\" id=\"4\"/><label for=\"4\">☆</label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"3\" id=\"3\"/><label for=\"3\">☆</label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"2\" id=\"2\"/><label for=\"2\">☆</label>\r\n                            <input type=\"radio\" name=\"rating\" value=\"1\" id=\"1\" /><label for=\"1\">☆</label>\r\n                        </div>\r\n                        <button id={\"submit\" + this.props.business.id} onClick={() => this.addToList(this.props.business)}>Add!</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id={\"successModal\" + this.props.business.id} className=\"modal\">\r\n                    <div className=\"modal-content\">\r\n                        <span className=\"close\" onClick={() => this.closeSuccessModal(this.props.business.id)}>&times;</span>\r\n                        <h2 id={\"modalMessage\" + this.props.business.id}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Business;"]},"metadata":{},"sourceType":"module"}